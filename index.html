<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>En-Vital Longevity Clinic - Baseline Assessment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .form-content {
            padding: 40px;
        }

        .section-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .section-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .section-header h2 {
            color: #2d3748;
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .section-subtitle {
            color: #718096;
            font-size: 0.95rem;
            margin-bottom: 20px;
            font-style: italic;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            color: #2d3748;
            font-weight: 500;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .label-with-tooltip {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip-icon {
            background: #667eea;
            color: white;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .tooltip-text {
            visibility: hidden;
            background-color: #2d3748;
            color: white;
            text-align: left;
            border-radius: 8px;
            padding: 12px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            width: 280px;
            font-size: 0.85rem;
            font-weight: normal;
            line-height: 1.4;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
        }

        input[type="text"],
        input[type="number"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .toggle-group {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .toggle-btn {
            flex: 1;
            padding: 12px 24px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
        }

        .toggle-btn:hover {
            border-color: #667eea;
        }

        .toggle-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .conditional-section {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
        }

        .conditional-section.active {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .score-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
        }

        .score-display h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .score-value {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .risk-indicator {
            padding: 12px;
            border-radius: 8px;
            margin-top: 12px;
            font-weight: 500;
            text-align: center;
        }

        .risk-low {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .risk-moderate {
            background: #fff3cd;
            color: #856404;
            border: 2px solid #ffeaa7;
        }

        .risk-high {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .risk-elite {
            background: #cfe2ff;
            color: #084298;
            border: 2px solid #b6d4fe;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .fms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .fms-item {
            background: white;
            padding: 16px;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
        }

        .fms-item label {
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            border-color: #667eea;
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .submit-section {
            text-align: center;
            padding: 40px;
            background: #f8f9fa;
            margin-top: 40px;
            border-radius: 12px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px 48px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #667eea;
            padding: 16px 48px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 12px;
        }

        .btn-secondary:hover {
            background: #f8f9fa;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }

        @media (max-width: 768px) {
            .form-content {
                padding: 20px;
            }

            .grid-2 {
                grid-template-columns: 1fr;
            }

            .header {
                padding: 24px;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .btn-secondary {
                margin-left: 0;
                margin-top: 12px;
                display: block;
                width: 100%;
            }
        }

        .info-box {
            background: #e8f4fd;
            border-left: 4px solid #667eea;
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
            font-size: 0.95rem;
            color: #2d3748;
        }

        .auto-calc {
            background: #f0f4f8;
            padding: 12px;
            border-radius: 8px;
            margin-top: 8px;
            font-weight: 600;
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèÉ‚Äç‚ôÇÔ∏è En-Vital Longevity Clinic</h1>
            <p>Baseline Longevity Assessment</p>
        </div>

        <div class="form-content">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%"></div>
            </div>

            <form id="longevityForm" action="https://formspree.io/f/xnnqgjvb" method="POST">
                <!-- Section 1: Basic Information -->
                <div class="section-card">
                    <div class="section-header">
                        <h2><span class="section-number">1</span> Basic Information</h2>
                    </div>
                    
                    <div class="grid-2">
                        <div class="form-group">
                            <label for="fullName">Full Name *</label>
                            <input type="text" id="fullName" name="fullName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="dob">Date of Birth *</label>
                            <input type="date" id="dob" name="dob" required>
                        </div>
                    </div>

                    <div class="grid-2">
                        <div class="form-group">
                            <label for="assessmentDate">Assessment Date</label>
                            <input type="date" id="assessmentDate" name="assessmentDate">
                        </div>
                        
                        <div class="form-group">
                            <label for="sex">Sex Assigned at Birth *</label>
                            <select id="sex" name="sex" required>
                                <option value="">Select...</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="prefer-not-say">Prefer not to say</option>
                            </select>
                        </div>
                    </div>

                    <div class="auto-calc" id="ageDisplay" style="display: none;">
                        Age: <span id="calculatedAge">-</span> years
                    </div>
                </div>

                <!-- Section 2: Cardiovascular Fitness -->
                <div class="section-card">
                    <div class="section-header">
                        <h2><span class="section-number">2</span> Cardiovascular Fitness</h2>
                    </div>
                    
                    <div class="section-subtitle">
                        VO‚ÇÇ Max - Your Body's Engine Power
                    </div>

                    <div class="info-box">
                        üí° Think of this as your body's horsepower - how efficiently you use oxygen during physical activity. This is the gold standard predictor of longevity.
                    </div>

                    <div class="form-group">
                        <label>Do you have a VO‚ÇÇ Max score?</label>
                        <div class="toggle-group">
                            <button type="button" class="toggle-btn" data-toggle="vo2MaxSection" data-value="yes">Yes</button>
                            <button type="button" class="toggle-btn" data-toggle="vo2MaxSection" data-value="no">No</button>
                        </div>
                    </div>

                    <div class="conditional-section" id="vo2MaxSection">
                        <div class="grid-2">
                            <div class="form-group">
                                <label for="vo2MaxScore">Your VO‚ÇÇ Max Score (ml/kg/min)</label>
                                <input type="number" id="vo2MaxScore" name="vo2MaxScore" step="0.1" min="0">
                            </div>
                            
                            <div class="form-group">
                                <label for="vo2MaxMethod">Testing Method</label>
                                <select id="vo2MaxMethod" name="vo2MaxMethod">
                                    <option value="">Select...</option>
                                    <option value="lab">Professional lab test (gold standard)</option>
                                    <option value="watch">Fitness watch estimate (Apple Watch, Garmin, etc.)</option>
                                    <option value="gym">Gym equipment calculation</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>

                        <div id="vo2MaxRisk" style="display: none;"></div>
                    </div>
                </div>

                <!-- Section 3: Strength & Stability -->
                <div class="section-card">
                    <div class="section-header">
                        <h2><span class="section-number">3</span> Strength & Stability</h2>
                    </div>

                    <!-- Grip Strength -->
                    <div class="section-subtitle">Grip Strength Test</div>
                    <div class="info-box">
                        üí™ A simple hand strength test that's surprisingly powerful at predicting overall health
                    </div>

                    <div class="form-group">
                        <label>Have you completed a grip strength test?</label>
                        <div class="toggle-group">
                            <button type="button" class="toggle-btn" data-toggle="gripStrengthSection" data-value="yes">Yes</button>
                            <button type="button" class="toggle-btn" data-toggle="gripStrengthSection" data-value="no">No</button>
                        </div>
                    </div>

                    <div class="conditional-section" id="gripStrengthSection">
                        <div class="grid-2">
                            <div class="form-group">
                                <label for="dominantHand">Dominant Hand</label>
                                <select id="dominantHand" name="dominantHand">
                                    <option value="">Select...</option>
                                    <option value="right">Right</option>
                                    <option value="left">Left</option>
                                    <option value="ambidextrous">Ambidextrous</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="gripScore">Best Score from 3 Attempts (kg)</label>
                                <input type="number" id="gripScore" name="gripScore" step="0.1" min="0">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="gripDevice">Testing Device</label>
                            <select id="gripDevice" name="gripDevice">
                                <option value="">Select...</option>
                                <option value="clinical">Hand dynamometer (clinical)</option>
                                <option value="gym">Gym dynamometer</option>
                                <option value="home">At-home device</option>
                            </select>
                        </div>

                        <div id="gripStrengthRisk" style="display: none;"></div>
                    </div>

                    <!-- Balance Assessment -->
                    <div class="section-subtitle" style="margin-top: 30px;">Balance Assessment - Single-Leg Stance</div>
                    <div class="info-box">
                        ‚öñÔ∏è Standing on one leg for 10+ seconds is linked to 84% lower risk of early mortality
                    </div>

                    <div class="form-group">
                        <label>Can you perform a balance test?</label>
                        <div class="toggle-group">
                            <button type="button" class="toggle-btn" data-toggle="balanceSection" data-value="yes">Yes</button>
                            <button type="button" class="toggle-btn" data-toggle="balanceSection" data-value="no">No</button>
                        </div>
                    </div>

                    <div class="conditional-section" id="balanceSection">
                        <div class="grid-2">
                            <div class="form-group">
                                <label for="balanceLeg">Dominant Leg</label>
                                <select id="balanceLeg" name="balanceLeg">
                                    <option value="">Select...</option>
                                    <option value="right">Right</option>
                                    <option value="left">Left</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="balanceTime">Best Time from 2 Attempts (seconds)</label>
                                <input type="number" id="balanceTime" name="balanceTime" step="0.1" min="0">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Testing Position (confirm all):</label>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" name="balancePosition" value="12inches">
                                    12 inches off ground
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="balancePosition" value="handsOnHips">
                                    Hands on hips
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" name="balancePosition" value="eyesOpen">
                                    Eyes open and forward
                                </label>
                            </div>
                        </div>

                        <div id="balanceRisk" style="display: none;"></div>
                    </div>
                </div>

                <!-- Section 4: Movement Quality -->
                <div class="section-card">
                    <div class="section-header">
                        <h2><span class="section-number">4</span> Movement Quality Assessment</h2>
                    </div>

                    <div class="section-subtitle">Functional Movement Screen (FMS)</div>
                    <div class="info-box">
                        üèÉ 7 fundamental movements that reveal injury risk and mobility limitations
                    </div>

                    <div class="form-group">
                        <label>Have you completed an FMS assessment?</label>
                        <div class="toggle-group">
                            <button type="button" class="toggle-btn" data-toggle="fmsSection" data-value="yes">Yes</button>
                            <button type="button" class="toggle-btn" data-toggle="fmsSection" data-value="no">No</button>
                        </div>
                    </div>

                    <div class="conditional-section" id="fmsSection">
                        <div class="info-box">
                            <strong>Scoring Guide:</strong><br>
                            3 = Performed perfectly<br>
                            2 = Completed with compensation<br>
                            1 = Unable to complete properly<br>
                            0 = Pain during movement
                        </div>

                        <div class="fms-grid">
                            <div class="fms-item">
                                <label for="fmsSquat">1. Deep Squat</label>
                                <select id="fmsSquat" name="fmsSquat" class="fms-input">
                                    <option value="">-</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                                <small style="color: #718096;">Tests: hips, knees, ankles, shoulders</small>
                            </div>

                            <div class="fms-item">
                                <label for="fmsLunge">2. In-Line Lunge</label>
                                <select id="fmsLunge" name="fmsLunge" class="fms-input">
                                    <option value="">-</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                                <small style="color: #718096;">Tests: deceleration & balance</small>
                            </div>

                            <div class="fms-item">
                                <label for="fmsHurdleL">3. Hurdle Step - Left</label>
                                <select id="fmsHurdleL" name="fmsHurdleL" class="fms-input">
                                    <option value="">-</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                            </div>

                            <div class="fms-item">
                                <label for="fmsHurdleR">Hurdle Step - Right</label>
                                <select id="fmsHurdleR" name="fmsHurdleR" class="fms-input">
                                    <option value="">-</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                                <small style="color: #718096;">Tests: single-leg stability</small>
                            </div>

                            <div class="fms-item">
                                <label for="fmsShoulderL">4. Shoulder Mobility - Left</label>
                                <select id="fmsShoulderL" name="fmsShoulderL" class="fms-input">
                                    <option value="">-</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                            </div>

                            <div class="fms-item">
                                <label for="fmsShoulderR">Shoulder Mobility - Right</label>
                                <select id="fmsShoulderR" name="fmsShoulderR" class="fms-input">
                                    <option value="">-</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                                <small style="color: #718096;">Tests: upper body flexibility</small>
                            </div>

                            <div class="fms-item">
                                <label for="fmsHamstringL">5. Hamstring Raise - Left</label>
                                <select id="fmsHamstringL" name="fmsHamstringL" class="fms-input">
                                    <option value="">-</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                            </div>

                            <div class="fms-item">
                                <label for="fmsHamstringR">Hamstring Raise - Right</label>
                                <select id="fmsHamstringR" name="fmsHamstringR" class="fms-input">
                                    <option value="">-</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                                <small style="color: #718096;">Tests: core stability</small>
                            </div>

                            <div class="fms-item">
                                <label for="fmsPushup">6. Trunk Stability Push-Up</label>
                                <select id="fmsPushup" name="fmsPushup" class="fms-input">
                                    <option value="">-</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                                <small style="color: #718096;">Tests: spine stability</small>
                            </div>

                            <div class="fms-item">
                                <label for="fmsRotaryL">7. Rotary Stability - Left</label>
                                <select id="fmsRotaryL" name="fmsRotaryL" class="fms-input">
                                    <option value="">-</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                            </div>

                            <div class="fms-item">
                                <label for="fmsRotaryR">Rotary Stability - Right</label>
                                <select id="fmsRotaryR" name="fmsRotaryR" class="fms-input">
                                    <option value="">-</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                </select>
                                <small style="color: #718096;">Tests: complex core control</small>
                            </div>
                        </div>

                        <div class="score-display" id="fmsTotalScore" style="display: none;">
                            <h3>Total FMS Score</h3>
                            <div class="score-value"><span id="fmsTotal">0</span> / 21</div>
                        </div>

                        <div id="fmsRisk" style="display: none;"></div>
                    </div>
                </div>

                <!-- Section 5: Body Composition -->
                <div class="section-card">
                    <div class="section-header">
                        <h2><span class="section-number">5</span> Body Composition Analysis</h2>
                    </div>

                    <div class="section-subtitle">
                        Where you store fat and how much muscle you have matters more than total weight
                    </div>

                    <div class="grid-2">
                        <div class="form-group">
                            <label for="weight">Weight</label>
                            <input type="number" id="weight" name="weight" step="0.1" min="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="weightUnit">Unit</label>
                            <select id="weightUnit" name="weightUnit">
                                <option value="lbs">lbs</option>
                                <option value="kg">kg</option>
                            </select>
                        </div>
                    </div>

                    <div class="grid-2">
                        <div class="form-group">
                            <label for="height">Height</label>
                            <input type="number" id="height" name="height" step="0.1" min="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="heightUnit">Unit</label>
                            <select id="heightUnit" name="heightUnit">
                                <option value="inches">inches</option>
                                <option value="cm">cm</option>
                            </select>
                        </div>
                    </div>

                    <div class="auto-calc" id="bmiDisplay" style="display: none;">
                        BMI: <span id="calculatedBMI">-</span>
                    </div>

                    <div class="form-group" style="margin-top: 30px;">
                        <label>Have you completed a body composition scan?</label>
                        <div class="toggle-group">
                            <button type="button" class="toggle-btn" data-toggle="bodyCompSection" data-value="yes">Yes</button>
                            <button type="button" class="toggle-btn" data-toggle="bodyCompSection" data-value="no">No</button>
                        </div>
                    </div>

                    <div class="conditional-section" id="bodyCompSection">
                        <div class="form-group">
                            <label for="scanMethod">Testing Method</label>
                            <select id="scanMethod" name="scanMethod">
                                <option value="">Select...</option>
                                <option value="dxa">DXA scan (gold standard)</option>
                                <option value="inbody">InBody (bioelectrical impedance)</option>
                                <option value="manual">Manual measurements</option>
                                <option value="smartscale">Smart scale</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <h3 style="margin: 30px 0 20px; color: #2d3748;">Fat Distribution Measurements</h3>
                        
                        <div class="grid-2">
                            <div class="form-group">
                                <label for="waist">Waist Circumference (inches/cm)</label>
                                <input type="number" id="waist" name="waist" step="0.1" min="0">
                            </div>
                            
                            <div class="form-group">
                                <label for="hip">Hip Circumference (inches/cm)</label>
                                <input type="number" id="hip" name="hip" step="0.1" min="0">
                            </div>
                        </div>

                        <div class="grid-2">
                            <div class="form-group">
                                <label for="upperArm">Upper Arm Circumference (inches/cm)</label>
                                <input type="number" id="upperArm" name="upperArm" step="0.1" min="0">
                            </div>
                            
                            <div class="form-group">
                                <label for="thigh">Thigh Circumference (inches/cm)</label>
                                <input type="number" id="thigh" name="thigh" step="0.1" min="0">
                            </div>
                        </div>

                        <div id="ratioDisplays"></div>

                        <h3 style="margin: 30px 0 20px; color: #2d3748;">Body Composition Percentages</h3>
                        
                        <div class="grid-2">
                            <div class="form-group">
                                <label for="bodyFat">Body Fat %</label>
                                <input type="number" id="bodyFat" name="bodyFat" step="0.1" min="0" max="100">
                            </div>
                            
                            <div class="form-group">
                                <label for="muscleMass">Muscle Mass %</label>
                                <input type="number" id="muscleMass" name="muscleMass" step="0.1" min="0" max="100">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="alm">Appendicular Lean Mass % (ALM)</label>
                            <input type="number" id="alm" name="alm" step="0.1" min="0" max="100">
                        </div>

                        <div id="bodyCompRisk"></div>
                    </div>
                </div>

                <!-- Section 6: Metabolic & Bone Health -->
                <div class="section-card">
                    <div class="section-header">
                        <h2><span class="section-number">6</span> Metabolic & Bone Health</h2>
                    </div>

                    <!-- RMR -->
                    <div class="section-subtitle">Resting Metabolic Rate</div>
                    <div class="info-box">
                        üî• Calories your body burns at complete rest
                    </div>

                    <div class="form-group">
                        <label>Do you know your RMR?</label>
                        <div class="toggle-group">
                            <button type="button" class="toggle-btn" data-toggle="rmrSection" data-value="yes">Yes</button>
                            <button type="button" class="toggle-btn" data-toggle="rmrSection" data-value="no">No</button>
                        </div>
                    </div>

                    <div class="conditional-section" id="rmrSection">
                        <div class="grid-2">
                            <div class="form-group">
                                <label for="rmrValue">RMR Value (kcal/day)</label>
                                <input type="number" id="rmrValue" name="rmrValue" step="1" min="0">
                            </div>
                            
                            <div class="form-group">
                                <label for="rmrMethod">Testing Method</label>
                                <select id="rmrMethod" name="rmrMethod">
                                    <option value="">Select...</option>
                                    <option value="dxa">DXA scan</option>
                                    <option value="metabolic">Metabolic cart</option>
                                    <option value="calculated">Calculated estimate</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Bone Density -->
                    <div class="section-subtitle" style="margin-top: 30px;">Bone Mineral Density</div>
                    <div class="info-box">
                        ü¶¥ Bone strength is critical - hip fractures carry 20-30% mortality risk within one year
                    </div>

                    <div class="form-group">
                        <label>Have you had a bone density scan?</label>
                        <div class="toggle-group">
                            <button type="button" class="toggle-btn" data-toggle="boneSection" data-value="yes">Yes</button>
                            <button type="button" class="toggle-btn" data-toggle="boneSection" data-value="no">No</button>
                        </div>
                    </div>

                    <div class="conditional-section" id="boneSection">
                        <div class="grid-2">
                            <div class="form-group">
                                <label for="tScore">T-Score</label>
                                <input type="number" id="tScore" name="tScore" step="0.1">
                            </div>
                            
                            <div class="form-group">
                                <label for="boneDate">Testing Date</label>
                                <input type="date" id="boneDate" name="boneDate">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="scanLocation">Scan Location</label>
                            <select id="scanLocation" name="scanLocation">
                                <option value="">Select...</option>
                                <option value="lumbar">Lumbar spine</option>
                                <option value="hip">Hip</option>
                                <option value="forearm">Forearm</option>
                                <option value="fullbody">Full body</option>
                            </select>
                        </div>

                        <div id="boneRisk" style="display: none;"></div>
                    </div>
                </div>

                <!-- Section 7: Advanced Assessments -->
                <div class="section-card">
                    <div class="section-header">
                        <h2><span class="section-number">7</span> Advanced Assessments</h2>
                    </div>

                    <div class="section-subtitle">
                        Additional tests that provide deeper insights into your biological age and disease risk
                    </div>

                    <div class="form-group">
                        <label>Select completed assessments:</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="advancedTests" value="genetic">
                                <div>
                                    <strong>Genetic Testing (MaxGen)</strong><br>
                                    <small style="color: #718096;">Nutrigenomic profile, detoxification pathways, personalized nutrition</small>
                                </div>
                            </label>
                            
                            <label class="checkbox-item">
                                <input type="checkbox" name="advancedTests" value="biologicalAge">
                                <div>
                                    <strong>Biological Age Testing (TruAge)</strong><br>
                                    <small style="color: #718096;">Epigenetic age vs chronological age</small>
                                </div>
                            </label>
                            
                            <label class="checkbox-item">
                                <input type="checkbox" name="advancedTests" value="bloodPanel">
                                <div>
                                    <strong>Comprehensive Blood Panel (Access Labs)</strong><br>
                                    <small style="color: #718096;">Complete biomarker analysis</small>
                                </div>
                            </label>
                            
                            <label class="checkbox-item">
                                <input type="checkbox" name="advancedTests" value="cimt">
                                <div>
                                    <strong>Cardiovascular Imaging (CIMT)</strong><br>
                                    <small style="color: #718096;">Carotid artery plaque assessment, early atherosclerosis detection</small>
                                </div>
                            </label>
                            
                            <label class="checkbox-item">
                                <input type="checkbox" name="advancedTests" value="cognitive">
                                <div>
                                    <strong>Cognitive Assessment (Lumosity)</strong><br>
                                    <small style="color: #718096;">Baseline cognitive performance</small>
                                </div>
                            </label>
                            
                            <label class="checkbox-item">
                                <input type="checkbox" name="advancedTests" value="nutritional">
                                <div>
                                    <strong>Nutritional Physical Exam (NFPE)</strong><br>
                                    <small style="color: #718096;">Hair, skin, nail, oral health assessment</small>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Section 8: Wearable Data -->
                <div class="section-card">
                    <div class="section-header">
                        <h2><span class="section-number">8</span> Wearable Device Data</h2>
                    </div>

                    <div class="section-subtitle">
                        If you track health metrics with a wearable device
                    </div>

                    <div class="form-group">
                        <label>Do you use a fitness tracker or smartwatch?</label>
                        <div class="toggle-group">
                            <button type="button" class="toggle-btn" data-toggle="wearableSection" data-value="yes">Yes</button>
                            <button type="button" class="toggle-btn" data-toggle="wearableSection" data-value="no">No</button>
                        </div>
                    </div>

                    <div class="conditional-section" id="wearableSection">
                        <div class="form-group">
                            <label for="deviceType">Device Type</label>
                            <select id="deviceType" name="deviceType">
                                <option value="">Select...</option>
                                <option value="applewatch">Apple Watch</option>
                                <option value="fitbit">Fitbit</option>
                                <option value="garmin">Garmin</option>
                                <option value="whoop">Whoop</option>
                                <option value="oura">Oura Ring</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="grid-2">
                            <div class="form-group">
                                <label for="restingHR">Resting Heart Rate (bpm)</label>
                                <input type="number" id="restingHR" name="restingHR" step="1" min="0">
                            </div>
                            
                            <div class="form-group">
                                <label for="maxHR">Max Heart Rate (bpm)</label>
                                <input type="number" id="maxHR" name="maxHR" step="1" min="0">
                            </div>
                        </div>

                        <div class="grid-2">
                            <div class="form-group">
                                <label for="hrv">HRV - Heart Rate Variability (ms)</label>
                                <input type="number" id="hrv" name="hrv" step="1" min="0">
                            </div>
                            
                            <div class="form-group">
                                <label for="sleepScore">Average Sleep Score (0-100)</label>
                                <input type="number" id="sleepScore" name="sleepScore" step="1" min="0" max="100">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="dailySteps">Average Daily Steps</label>
                            <input type="number" id="dailySteps" name="dailySteps" step="1" min="0">
                        </div>
                    </div>
                </div>

                <!-- Section 9: Goals & Priorities -->
                <div class="section-card">
                    <div class="section-header">
                        <h2><span class="section-number">9</span> Your Goals & Priorities</h2>
                    </div>

                    <div class="form-group">
                        <label>What matters most to you? (Select up to 3)</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="goals" value="independence" class="goal-checkbox">
                                Living independently as long as possible
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="goals" value="strength" class="goal-checkbox">
                                Maintaining physical strength and mobility
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="goals" value="bodycomp" class="goal-checkbox">
                                Optimizing body composition
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="goals" value="cardiovascular" class="goal-checkbox">
                                Improving cardiovascular fitness
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="goals" value="disease" class="goal-checkbox">
                                Reducing disease risk
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="goals" value="cognitive" class="goal-checkbox">
                                Enhancing cognitive function
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="goals" value="sleep" class="goal-checkbox">
                                Better sleep quality
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="goals" value="injury" class="goal-checkbox">
                                Injury prevention
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="goals" value="performance" class="goal-checkbox">
                                Athletic performance
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="additionalNotes">Additional Notes</label>
                        <textarea id="additionalNotes" name="additionalNotes" placeholder="Share any concerns, health history, or context that would help us personalize your longevity plan..."></textarea>
                    </div>
                </div>

                <!-- Submit Section -->
                <div class="submit-section">
                    <button type="submit" class="btn-primary">Submit Assessment</button>
                    <button type="button" class="btn-secondary" onclick="window.print()">Download PDF</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Auto-set today's date
        document.getElementById('assessmentDate').valueAsDate = new Date();

        // Toggle button functionality
        document.querySelectorAll('.toggle-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                const targetSection = this.dataset.toggle;
                const value = this.dataset.value;
                
                // Remove active from siblings
                this.parentElement.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
                
                // Add active to clicked
                this.classList.add('active');
                
                // Show/hide conditional section
                const section = document.getElementById(targetSection);
                if (value === 'yes') {
                    section.classList.add('active');
                } else {
                    section.classList.remove('active');
                }
                
                updateProgress();
            });
        });

        // Calculate age from DOB
        document.getElementById('dob').addEventListener('change', function() {
            const dob = new Date(this.value);
            const today = new Date();
            let age = today.getFullYear() - dob.getFullYear();
            const m = today.getMonth() - dob.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) {
                age--;
            }
            
            if (age > 0 && age < 150) {
                document.getElementById('calculatedAge').textContent = age;
                document.getElementById('ageDisplay').style.display = 'block';
            }
            updateProgress();
        });

        // Calculate BMI
        function calculateBMI() {
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const weightUnit = document.getElementById('weightUnit').value;
            const heightUnit = document.getElementById('heightUnit').value;
            
            if (weight && height) {
                let weightKg = weightUnit === 'lbs' ? weight * 0.453592 : weight;
                let heightM = heightUnit === 'inches' ? height * 0.0254 : height / 100;
                
                const bmi = (weightKg / (heightM * heightM)).toFixed(1);
                document.getElementById('calculatedBMI').textContent = bmi;
                document.getElementById('bmiDisplay').style.display = 'block';
            }
        }

        document.getElementById('weight').addEventListener('input', calculateBMI);
        document.getElementById('height').addEventListener('input', calculateBMI);
        document.getElementById('weightUnit').addEventListener('change', calculateBMI);
        document.getElementById('heightUnit').addEventListener('change', calculateBMI);

        // VO2 Max risk assessment
        document.getElementById('vo2MaxScore').addEventListener('input', function() {
            const score = parseFloat(this.value);
            const riskDiv = document.getElementById('vo2MaxRisk');
            
            if (score) {
                let riskClass = '';
                let riskText = '';
                
                if (score < 30) {
                    riskClass = 'risk-high';
                    riskText = 'üî¥ High Risk Zone (15-29): Elevated risk of losing independence';
                } else if (score < 50) {
                    riskClass = 'risk-moderate';
                    riskText = 'üü° Average Range (30-49): Typical for middle-aged adults';
                } else if (score < 70) {
                    riskClass = 'risk-low';
                    riskText = 'üü¢ Longevity Protection Zone (50-69): Excellent fitness level';
                } else {
                    riskClass = 'risk-elite';
                    riskText = '‚≠ê Elite Athlete Range (70+): Outstanding cardiovascular fitness';
                }
                
                riskDiv.innerHTML = `<div class="risk-indicator ${riskClass}">${riskText}</div>`;
                riskDiv.style.display = 'block';
            }
        });

        // Grip strength assessment
        document.getElementById('gripScore').addEventListener('input', function() {
            const score = parseFloat(this.value);
            const age = parseInt(document.getElementById('calculatedAge').textContent);
            const sex = document.getElementById('sex').value;
            const riskDiv = document.getElementById('gripStrengthRisk');
            
            if (score && age && sex) {
                let comparison = '';
                let avgRange = '';
                
                // Simplified age/sex comparison
                if (sex === 'male') {
                    if (age < 40) avgRange = '44-48 kg';
                    else if (age < 50) avgRange = '42-46 kg';
                    else if (age < 60) avgRange = '39-43 kg';
                    else if (age < 70) avgRange = '35-40 kg';
                    else avgRange = '30-35 kg';
                } else if (sex === 'female') {
                    if (age < 40) avgRange = '24-28 kg';
                    else if (age < 50) avgRange = '23-27 kg';
                    else if (age < 60) avgRange = '21-25 kg';
                    else if (age < 70) avgRange = '18-22 kg';
                    else avgRange = '15-20 kg';
                }
                
                riskDiv.innerHTML = `<div class="risk-indicator risk-low">Average range for your age/sex: ${avgRange}</div>`;
                riskDiv.style.display = 'block';
            }
        });

        // Balance assessment
        document.getElementById('balanceTime').addEventListener('input', function() {
            const time = parseFloat(this.value);
            const age = parseInt(document.getElementById('calculatedAge').textContent);
            const riskDiv = document.getElementById('balanceRisk');
            
            if (time && age) {
                let riskClass = '';
                let riskText = '';
                
                if (time >= 10) {
                    riskClass = 'risk-low';
                    riskText = '‚úì Excellent balance - associated with lower mortality risk';
                } else {
                    riskClass = 'risk-high';
                    riskText = '‚ö† Below 10 seconds - opportunity for balance improvement';
                }
                
                riskDiv.innerHTML = `<div class="risk-indicator ${riskClass}">${riskText}</div>`;
                riskDiv.style.display = 'block';
            }
        });

        // FMS Score calculation
        document.querySelectorAll('.fms-input').forEach(input => {
            input.addEventListener('change', calculateFMSScore);
        });

        function calculateFMSScore() {
            const scores = {
                squat: parseInt(document.getElementById('fmsSquat').value) || 0,
                lunge: parseInt(document.getElementById('fmsLunge').value) || 0,
                hurdleL: parseInt(document.getElementById('fmsHurdleL').value) || 0,
                hurdleR: parseInt(document.getElementById('fmsHurdleR').value) || 0,
                shoulderL: parseInt(document.getElementById('fmsShoulderL').value) || 0,
                shoulderR: parseInt(document.getElementById('fmsShoulderR').value) || 0,
                hamstringL: parseInt(document.getElementById('fmsHamstringL').value) || 0,
                hamstringR: parseInt(document.getElementById('fmsHamstringR').value) || 0,
                pushup: parseInt(document.getElementById('fmsPushup').value) || 0,
                rotaryL: parseInt(document.getElementById('fmsRotaryL').value) || 0,
                rotaryR: parseInt(document.getElementById('fmsRotaryR').value) || 0
            };
            
            // Take lower score for bilateral movements
            const hurdle = Math.min(scores.hurdleL || 3, scores.hurdleR || 3);
            const shoulder = Math.min(scores.shoulderL || 3, scores.shoulderR || 3);
            const hamstring = Math.min(scores.hamstringL || 3, scores.hamstringR || 3);
            const rotary = Math.min(scores.rotaryL || 3, scores.rotaryR || 3);
            
            const total = scores.squat + scores.lunge + hurdle + shoulder + hamstring + scores.pushup + rotary;
            
            if (total > 0) {
                document.getElementById('fmsTotal').textContent = total;
                document.getElementById('fmsTotalScore').style.display = 'block';
                
                const riskDiv = document.getElementById('fmsRisk');
                if (total < 14) {
                    riskDiv.innerHTML = '<div class="risk-indicator risk-high">üî¥ Elevated Injury Risk (&lt;14): Consider movement screening and corrective exercises</div>';
                } else {
                    riskDiv.innerHTML = '<div class="risk-indicator risk-low">üü¢ Low Injury Risk (15-21): Good movement quality</div>';
                }
                riskDiv.style.display = 'block';
            }
        }

        // Body composition ratios
        function calculateRatios() {
            const waist = parseFloat(document.getElementById('waist').value);
            const hip = parseFloat(document.getElementById('hip').value);
            const height = parseFloat(document.getElementById('height').value);
            const heightUnit = document.getElementById('heightUnit').value;
            const ratioDiv = document.getElementById('ratioDisplays');
            
            let html = '';
            
            if (waist && hip) {
                const whr = (waist / hip).toFixed(2);
                const sex = document.getElementById('sex').value;
                let whrRisk = '';
                
                if (sex === 'male') {
                    whrRisk = whr <= 0.90 ? 'risk-low' : 'risk-high';
                } else if (sex === 'female') {
                    whrRisk = whr <= 0.85 ? 'risk-low' : 'risk-high';
                }
                
                html += `<div class="auto-calc">Waist-to-Hip Ratio: ${whr}</div>`;
                html += `<div class="risk-indicator ${whrRisk}">Target: Men ‚â§0.90, Women ‚â§0.85</div>`;
            }
            
            if (waist && height) {
                let heightInches = heightUnit === 'cm' ? height / 2.54 : height;
                const whtr = (waist / heightInches).toFixed(2);
                let whtrRisk = 'risk-low';
                let whtrText = 'Ideal';
                
                if (whtr >= 0.6) {
                    whtrRisk = 'risk-high';
                    whtrText = 'High Risk';
                } else if (whtr >= 0.5) {
                    whtrRisk = 'risk-moderate';
                    whtrText = 'Moderate Risk';
                }
                
                html += `<div class="auto-calc" style="margin-top: 12px;">Waist-to-Height Ratio: ${whtr}</div>`;
                html += `<div class="risk-indicator ${whtrRisk}">${whtrText}: Ideal &lt;0.5, Moderate 0.5-0.59, High Risk ‚â•0.6</div>`;
            }
            
            ratioDiv.innerHTML = html;
        }

        document.getElementById('waist').addEventListener('input', calculateRatios);
        document.getElementById('hip').addEventListener('input', calculateRatios);

        // T-Score assessment
        document.getElementById('tScore').addEventListener('input', function() {
            const tScore = parseFloat(this.value);
            const riskDiv = document.getElementById('boneRisk');
            
            if (tScore) {
                let riskClass = '';
                let riskText = '';
                
                if (tScore >= -1.0) {
                    riskClass = 'risk-low';
                    riskText = 'üü¢ Normal (+1.0 to -1.0): Low Risk - Healthy bone density';
                } else if (tScore >= -2.5) {
                    riskClass = 'risk-moderate';
                    riskText = 'üü° Osteopenia (-1.1 to -2.4): Moderate Risk - Early warning, consider intervention';
                } else {
                    riskClass = 'risk-high';
                    riskText = 'üî¥ Osteoporosis (‚â§-2.5): High Risk - Fragility zone, immediate intervention needed';
                }
                
                riskDiv.innerHTML = `<div class="risk-indicator ${riskClass}">${riskText}</div>`;
                riskDiv.style.display = 'block';
            }
        });

        // Goal checkbox limiter
        document.querySelectorAll('.goal-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const checked = document.querySelectorAll('.goal-checkbox:checked');
                if (checked.length > 3) {
                    this.checked = false;
                    alert('Please select up to 3 priorities');
                }
            });
        });

        // Progress bar
        function updateProgress() {
            const form = document.getElementById('longevityForm');
            const inputs = form.querySelectorAll('input[required], select[required]');
            const toggles = form.querySelectorAll('.toggle-btn.active');
            
            let filled = 0;
            inputs.forEach(input => {
                if (input.value) filled++;
            });
            
            const progress = Math.min(((filled / inputs.length) * 100), 100);
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // Update progress on any input
        document.querySelectorAll('input, select, textarea').forEach(el => {
            el.addEventListener('change', updateProgress);
            el.addEventListener('input', updateProgress);
        });

        // Form submission
        document.getElementById('longevityForm').addEventListener('submit', function(e) {
            // Let form submit naturally to Formspree
            // Show loading state
            const submitBtn = this.querySelector('.btn-primary');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Submitting...';
            submitBtn.disabled = true;
        });

        // Initialize
        updateProgress();
    </script>
</body>
</html>
